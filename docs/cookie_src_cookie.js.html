<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>cookie/src/cookie.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Browser.html">Browser</a><ul class='methods'><li data-type='method'><a href="module-Browser.html#~isOutdated">isOutdated</a></li><li data-type='method'><a href="module-Browser.html#~matches">matches</a></li><li data-type='method'><a href="module-Browser.html#~oneOf">oneOf</a></li><li data-type='method'><a href="module-Browser.html#~platform">platform</a></li></ul></li><li><a href="module-Cookie.html">Cookie</a><ul class='methods'><li data-type='method'><a href="module-Cookie.html#~configure">configure</a></li><li data-type='method'><a href="module-Cookie.html#~get">get</a></li><li data-type='method'><a href="module-Cookie.html#~set">set</a></li><li data-type='method'><a href="module-Cookie.html#~unset">unset</a></li></ul></li><li><a href="module-Debounce.html">Debounce</a><ul class='methods'><li data-type='method'><a href="module-Debounce.html#~debounce">debounce</a></li><li data-type='method'><a href="module-Debounce.html#~debounceAsync">debounceAsync</a></li></ul></li><li><a href="module-Search.html">Search</a><ul class='methods'><li data-type='method'><a href="module-Search.html#~version">version</a></li></ul></li><li><a href="module-Version.html">Version</a><ul class='methods'><li data-type='method'><a href="module-Version.html#.compareVersion">compareVersion</a></li><li data-type='method'><a href="module-Version.html#.diffVersions">diffVersions</a></li><li data-type='method'><a href="module-Version.html#.versionToArray">versionToArray</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">cookie/src/cookie.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Cookie module. Handy functions to deal with cookies on the browser.
 * @module Cookie
 * @since 1.0.0
 */

let defaultOptions = {};

export default {
  /**
   * Configure default options used when settings values for cookies.
   * If all your cookies must present the same property, like secure,
   * use this method before setting the cookie values.
   * @since 1.0.0
   * @function configure
   * @param {Object} options Default options for future cookie values.
   * @param {Date} options.expires Cookie expiration date
   * @param {String} options.path Sets the URI to which the Cookie applies. Must be an absolute path.
   * @param {String} options.domain Sets the domain to which the Cookie applies. If a domain is specified, subdomains are always included.
   * @param {boolean} options.secure Cookie to only be transmitted over secure protocol as https.
   * @example
   *
   * import Cookie from '@wetransfer/concorde-cookie';
   *
   * Cookie.configure({ secure: true });
   * Cookie.set('foo', 'bar');
   * // => foo=bar; secure'
   */
  configure(options = {}) {
    defaultOptions = Object.assign({}, options);
  },

  /**
   * Get the value from a cookie, given a key.
   * @since 1.0.0
   * @function get
   * @param {String} key Cookie key name.
   * @param {Object} [options]
   * @param {Any} [options.defaultValue=null] Default value in case cookies are not available or the value has not been set previously.
   * @param {boolean} [options.raw=false] If true, the value of the cookie is not decoded.
   * @example
   *
   * import Cookie from '@wetransfer/concorde-cookie';
   *
   * Cookie.get('foo');
   * // => 'bar'
   *
   * Cookie.get('nonexistant', { defaultValue: 1 });
   * // => 1
   *
   * Cookie.get('yolo', { raw: true });
   * // => 'bar%20yolo'
   */
  get(key, { defaultValue = null, raw = false } = {}) {
    if (!document.cookie) {
      return defaultValue;
    }

    const regexp = new RegExp(
      '(?:^|; )' + encodeURIComponent(key) + '=([^;]*)'
    );
    const result = document.cookie.match(regexp);
    if (!result) {
      return defaultValue;
    }

    return raw ? result[1] : decodeURIComponent(result[1]);
  },

  /**
   * Set the value for a cookie. If extra options are specified, they will override default options
   * defined with `configure method`.
   * @since 1.0.0
   * @function set
   * @param {String} key Cookie key name.
   * @param {String} [value=null] Cookie value.
   * @param {Object} [options={}]
   * @param {Date} [options.expires] Cookie expiration date
   * @param {String} [options.path] Sets the URI to which the Cookie applies. Must be an absolute path.
   * @param {String} [options.domain] Sets the domain to which the Cookie applies. If a domain is specified, subdomains are always included.
   * @param {boolean} [options.secure] Cookie to only be transmitted over secure protocol as https.
   * @example
   *
   * import Cookie from '@wetransfer/concorde-cookie';
   *
   * Cookie.set('foo', 'bar');
   * // => 'foo=bar'
   */
  set(key, value = null, options = {}) {
    const opts = Object.assign({}, defaultOptions, options);

    // Are we unsetting this cookie?
    if (value === null) {
      opts.days = -1;
    }

    // Do we have an expiry in days?
    if (Number.isInteger(opts.days)) {
      opts.expires = new Date();
      opts.expires.setDate(opts.expires.getDate() + opts.days);
    }

    // Make sure value is a string
    const safeKey = encodeURIComponent(key);
    let safeValue = String(value);
    safeValue = opts.raw ? safeValue : encodeURIComponent(safeValue);

    // Build our cookie string
    const cookieBuilder = [`${safeKey}=${safeValue}`];

    // Does the cookie have expiry settings?
    if (opts.expires) {
      cookieBuilder.push(`expires=${opts.expires.toUTCString()}`);
    }

    // Does the cookie need a path?
    if (opts.path) {
      cookieBuilder.push(`path=${opts.path}`);
    }

    // Does the cookie need a domain?
    if (opts.domain) {
      cookieBuilder.push(`domain=${opts.domain}`);
    }

    // Does the cookie need to be secure?
    if (opts.secure) {
      cookieBuilder.push('secure');
    }

    // Set the cookie, yay
    document.cookie = cookieBuilder.join('; ');
  },

  /**
   * Unset the value of a cookie, with null, and expires it.
   * @since 1.0.0
   * @function unset
   * @param {String} key Cookie key name.
   * @param {Object} [options={}]
   * @param {Date} [options.expires] Cookie expiration date
   * @param {String} [options.path] Sets the URI to which the Cookie applies. Must be an absolute path.
   * @param {String} [options.domain] Sets the domain to which the Cookie applies. If a domain is specified, subdomains are always included.
   * @param {boolean} [options.secure] Cookie to only be transmitted over secure protocol as https.
   * @example
   *
   * import Cookie from '@wetransfer/concorde-cookie';
   *
   * Cookie.unset('foo');
   * // => 'foo=null; expires=Thu, 21 Dec 2017 10:57:39 GMT'
   */
  unset(key, options = {}) {
    this.set(key, null, options);
  }
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Feb 05 2018 11:14:17 GMT+0100 (CET) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
